# ヒッコシマップ（HikkoshiMap）

## プロジェクト概要

東京都全域（約800駅）の住環境リスク情報を駅単位で可視化するWebサービス。
大手不動産ポータル（SUUMO・HOME'S等）が広告主への配慮で掲載できない「ネガティブ情報」（治安悪化・災害リスク・騒音等）を、客観データ＋UGCで忖度なく提供する。

## ビジネスモデル

- **ターゲット**: 東京都内で引越しを検討している個人
- **収益目標**: 月¥100K
- **競合優位性**: 大手ポータルは不動産会社が広告主のため、物件価値を下げる情報の掲載が構造的に不可能。この構造的ギャップを突く。
- **収益モデル（将来）**: フリーミアム（月N駅まで無料、超過分は有料）
- **MVP**: 無課金で全公開。SEOトラフィックで需要検証。

## 7層ノイズ（MVPは★のみ）

- ★ Safety（治安）: 犯罪発生件数・種別
- ★ Hazard（災害）: 洪水・土砂・液状化・津波リスク
- ★ Vibe（雰囲気）: 人口構成・施設密度・UGC
- Sound（騒音）: Phase 2
- Community（コミュニティ）: Phase 2
- Change（変化）: Phase 2
- Sensory（五感）: Phase 2

## 技術スタック

- **モノレポ**: Turborepo + pnpm
- **フロントエンド**: Next.js 15 (App Router, SSG中心)
- **DB**: Supabase (PostgreSQL + PostGIS)
- **地図**: Leaflet + OpenStreetMap
- **データパイプライン**: Python 3.12+
- **ホスティング**: Vercel Hobby → Pro（課金導入時）
- **月額コスト**: ¥125（ドメインのみ）

## リポジトリ構成

```
hikkoshimap/
├── apps/web/         # Next.js フロントエンド
├── packages/
│   ├── shared/       # 共有型定義・定数
│   ├── ui/           # 共有UIコンポーネント
│   └── supabase/     # DBスキーマ・マイグレーション・型
├── pipeline/         # Pythonデータパイプライン
└── docs/             # プロジェクトドキュメント（詳細はここ参照）
```

## 主要データソース

- **Safety**: 警視庁「区市町村の町丁別、罪種別及び手口別認知件数」CSV
- **Hazard**: 不動産情報ライブラリ API（MLIT）
- **Vibe**: e-Stat API（人口統計）+ OpenStreetMap Overpass API（施設）+ UGC
- **駅マスタ**: 国土数値情報「鉄道データ」GML

## MVP成功指標

- 3ヶ月以内に月間1,000PV
- 平均滞在時間2分以上
- 比較ページ利用率10%以上
- 30日以内再訪率20%以上

## 開発ルール

### Agent Teams 必須

実装タスクは必ず Agent Teams を使い、役割分担して並行作業すること。
単一エージェントで逐次実装しない。

**チーム編成の原則:**
- 各チームメイトは担当ディレクトリのファイルのみ編集する（ファイル競合防止）
- リードは実装せず、タスク割り当て・進捗確認・統合テストに専念する
- 依存関係がある場合はリードが実行順序を制御する

**典型的なチーム分割:**
- `apps/web/` — フロントエンド担当
- `packages/` — 共有パッケージ担当
- `pipeline/` — データパイプライン担当
- ルート設定・インフラ — スキャフォールド担当

タスクの規模が小さい場合（1ファイルの修正等）は単一エージェントでもよいが、
複数ファイル・複数ディレクトリにまたがる実装は必ずチームを組むこと。

### スキル活用

コード生成・レビュー・デプロイ時はスキルを参照し、ベストプラクティスに従うこと。

**インストール済みスキル（Vercel公式）:**
```bash
# 初回セットアップ時に実行
npx skills add vercel-labs/agent-skills
```

| スキル | 用途 | いつ使うか |
|--------|------|-----------|
| `react-best-practices` | React/Next.js パフォーマンス最適化（57ルール） | コンポーネント作成・レビュー・リファクタリング時 |
| `web-design-guidelines` | アクセシビリティ・UX（100+ルール） | UI実装・レビュー時 |
| `vercel-deploy` | Vercelデプロイ | デプロイ時 |

**プロジェクト固有スキル（`skills/` ディレクトリ）:**

| スキル | 用途 | いつ使うか |
|--------|------|-----------|
| `hikkoshi-data-pipeline` | データパイプラインの実装パターン | pipeline/ のスクリプト作成・修正時 |
| `hikkoshi-supabase` | Supabase スキーマ・RLS・クエリパターン | DB関連の実装時 |
| `hikkoshi-seo` | 駅ページSEO・構造化データ・メタデータ | ページ作成・SEO最適化時 |

各スキルの詳細は `skills/{スキル名}/SKILL.md` を参照。

## 詳細ドキュメント

各トピックの詳細は `docs/` ディレクトリを参照:
- `docs/business-concept.md` — ビジネスモデル・コンセプト・競合優位性
- `docs/competitive-analysis.md` — 競合分析結果（9カテゴリ・21サービス）
- `docs/mvp-plan.md` — MVP計画・成功指標・フェーズ設計
- `docs/data-pipeline.md` — データソース・パイプライン設計・スキーマ
- `docs/tasks.md` — タスク管理（Week 1 タスクリスト・進捗）
